#!/bin/sh

if [ ! $1 ]; then
	caminho="${HOME}/github/majestic"
else
	caminho="$1"
fi

cd $caminho

if [ ! -f .noup ]; then
	status=$(git add . -n)
	if [ ! -z "$status" ]; then
		c=$(echo $(git add . -n | tr '\r\n' ' '))
		if [ $2 ]; then
			m="$2"
		else
			m="Autocommit por Git-Cron: alterações: $c"
		fi
		git add .
		git commit -m "$m"
		git push
	fi
fi
